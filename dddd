De ce tot apare „No such file or directory”

RTR trimite exact textul după -Raw= către /bin/bash -c '<comandă>'.
Dacă primul cuvânt din acea linie ( ss, netstat, who …) nu există pe disc sau nu e în $PATH, Bash îţi răspunde că n‑a găsit fişierul.

Pe serverul tău se pare că lipseşte:

ss  (pachetul iproute2)

netstat  (pachetul net‑tools)

who/last  (pachetul util‑linux)



---

Comenzi care NU depind de niciunul dintre aceste binare

Tot ce‑ţi trebuie există chiar şi pe un Ubuntu ultra‑minimal: ps, grep, awk, /proc şi logul auth.log.

1 ️⃣ Cine este conectat ACUM (user + TTY + PID)

runscript -Raw="ps -eo pid,user,cmd | grep -E '[s]shd: .+@' "

Fiecare sesiune interactivă apare ca proces
sshd: <utilizator>@pts/<N> – acolo vezi utilizatorul logat.

Dacă nu primeşti niciun rând, nu există sesiuni interactive deschise în clipa asta.



---

2 ️⃣ De pe CE IP a venit fiecare sesiune (fără ss/netstat)

runscript -Raw='
for pid in $(pgrep -f "sshd: .*@"); do
  raddr=$(awk -v pid=$pid '\''NR>1 && $10==pid {split($3,a,":"); ip=sprintf("%d.%d.%d.%d",(strtonum("0x"substr(a[1],7,2))), (strtonum("0x"substr(a[1],5,2))), (strtonum("0x"substr(a[1],3,2))), (strtonum("0x"substr(a[1],1,2)))); print ip}'\'' /proc/net/tcp)
  echo "PID $pid  ->  $raddr"
done
'

1. Pentru fiecare proces‑copil sshd: user@pts/X (PID‑urile găsite mai sus)


2. se parcurge /proc/net/tcp;


3. se extrage adresa IP remote asociată acelui PID (coloana 10).



Rezultatul arată ceva de genul:

PID 14873  ->  203.0.113.55
PID 14911  ->  10.10.5.42


---

3 ️⃣ CINE s‑a autentificat (istoric) – indiferent ce utilitare lipsesc

runscript -Raw='grep "sshd.*Accepted" /var/log/auth.log | tail -n 50'

logul /var/log/auth.log este creat de rsyslog/systemd chiar şi pe build‑uri minime;

linia tipică:

May  6 09:41:23 srv sshd[14873]: Accepted publickey for alice from 203.0.113.55 port 54321 ssh2


Dacă fişierul e gol sau prea scurt, verifică arhivele:

runscript -Raw='zgrep "sshd.*Accepted" /var/log/auth.log.*.gz | tail -n 50'


---

4 ️⃣ Exportă log‑ul local dacă vrei să‑l analizezi pe larg

runscript -Raw="cp /var/log/auth.log /tmp/ssh.log"
get /tmp/ssh.log

(descarci apoi din Response ▶ Activity ▶ Files acquired)


---

Mini‑cheatsheet care funcţionează sigur


---

Dacă oricare dintre comenzi încă dă eroare

1. Copiază‐mi exact textul erorii (linia roşie completă).


2. Spune‐mi dacă ai rulat sesiunea RTR cu elevation (sudo) – la unele fişiere /proc e nevoie.



Aşa putem ajusta pe loc, dar pentru majoritatea serverelor Ubuntu cele patru comenzi de mai sus livrează imediat utilizator + PID + IP pentru fiecare login SSH. Spor la investigaţie!

